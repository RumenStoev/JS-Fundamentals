//Has a problem with the sort of comments!

function Comments(arr) {
    /*
   "Comments on {article1 name}
   --- From user {username1}: {comment title} - {comment content}
   --- From user {username2}: â€¦
   Comments on {article2 name}
   */
   let testUsers = [];
    let result = {}
    //Find Articles!!!
    arr.forEach(item => {

        if (item.includes("article")) {
            let article = item.split("article")[1].trim();
            if (!result.hasOwnProperty(article)) {
                result[article] = {}
            }
        }

        if(item.includes("user")) {
           let nameUser = item.split("user")[1].trim()
        
           testUsers.push(nameUser)
        }
    })
    //Find posts and Commencts!!!
    arr.forEach(item => {
        if (item.includes("posts on")) {
            let [user, texts] = item.split("posts on");
            let [currArticle, text] = texts.split(": ")
            currArticle = currArticle.trim();
            user = user.trim()

            if (result.hasOwnProperty(currArticle) && testUsers.includes(user)) {
                result[currArticle][user] = text;
            }
        }
    })

    let sortByCountOfComments = (a, b) => Object.keys(b[1]).length - Object.keys(a[1]).length;
    
    //OutputPattern:
  return  Object.entries(result)
        .sort(sortByCountOfComments)
        .forEach((item,index) => {
            console.log(`Comments on ${item[0]}`);
            let sortedItem = Object.keys(item[1]).sort().forEach(user => {
               
               console.log(`--- From user ${user}: ${item[1][user].replace(","," -")}`)
            })
        })
}

console.log(
    Comments(['user aUser123',
        'someUser posts on someArticle: NoTitle, stupidComment',
        'article Books',
        'article Movies',
        'article Shopping',
        'user someUser',
        'user uSeR4',
        'user lastUser',
        'uSeR4 posts on Books: I like books, I do really like them',
        'uSeR4 posts on Movies: I also like movies, I really do',
        'someUser posts on Shopping: title, I go shopping every day',
        'someUser posts on Movies: Like, I also like movies very much'])
)

 Comments on Movies
--- From user someUser: Like - I also like movies very much
--- From user uSeR4: I also like movies - I really do
Comments on Books
--- From user uSeR4: I like books - I do really like them
Comments on Shopping
--- From user someUser: title - I go shopping every day
